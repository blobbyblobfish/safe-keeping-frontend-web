(this["webpackJsonpsafe-keeping-frontend-web"]=this["webpackJsonpsafe-keeping-frontend-web"]||[]).push([[0],{161:function(e,t,a){e.exports=a(276)},170:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(71),o=a.n(c),l=a(46),i=a(13),s=a(22),u=a(10);a(170),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=Object(i.b)((function(e){return{state:e}}))((function(e){var t=e.state;return r.a.createElement("div",{className:"navbar"},t.auth.token?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{className:"navlink",to:"/dashboard"},"Dashboard"),r.a.createElement(s.b,{className:"navlink",to:"/account"},"My Account"),r.a.createElement(s.b,{className:"navlink",to:"/logout"},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{className:"navlink",to:"/login"},"Login"),r.a.createElement(s.b,{className:"navlink",to:"/register"},"Register")))})),d=a(44);var p=Object(i.b)((function(e){return{state:e}}))((function(e){e.state;var t=e.dispatch,a=e.history,c=Object(n.useState)(""),o=Object(d.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(""),m=Object(d.a)(u,2),p=m[0],h=m[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(a);var n={email:l,password:p},r={method:"POST",headers:{"content-type":"application/json",accepts:"application/json"},body:JSON.stringify(n)};fetch("http://localhost:3000/therapists/login",r).then((function(e){return e.json()})).then((function(e){e.token&&(console.log(e),t({type:"LOGIN",payload:e}),localStorage.tokenId="".concat(e.token).concat(e.therapist.id),a.push("/dashboard"))}))}},r.a.createElement("input",{name:"email",value:l,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"email"}),r.a.createElement("input",{name:"password",value:p,onChange:function(e){return h(e.target.value)},type:"password",placeholder:"password"}),r.a.createElement("input",{type:"submit"})),r.a.createElement(s.b,{to:"/register"},"Don't have an account?"))}));var h=Object(i.b)((function(e){return{state:e}}))((function(e){e.state;var t=e.dispatch,a=e.history,c=Object(n.useState)(""),o=Object(d.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(""),m=Object(d.a)(u,2),p=m[0],h=m[1],f=Object(n.useState)(""),g=Object(d.a)(f,2),E=g[0],v=g[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={name:l,email:p,password:E},r={method:"POST",headers:{"content-type":"application/json",accepts:"application/json"},body:JSON.stringify(n)};fetch("http://localhost:3000/therapists",r).then((function(e){return e.json()})).then((function(e){t({type:"LOGIN",payload:e}),localStorage.tokenId="".concat(e.token).concat(e.therapist.id),a.push("/dashboard")}))}},r.a.createElement("input",{name:"name",value:l,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Name"}),r.a.createElement("input",{name:"email",value:p,onChange:function(e){return h(e.target.value)},type:"text",placeholder:"email"}),r.a.createElement("input",{name:"password",value:E,onChange:function(e){return v(e.target.value)},type:"password",placeholder:"password"}),r.a.createElement("input",{type:"submit"})),r.a.createElement(s.b,{to:"/login"},"Have an account?"))})),f=a(20),g=(Object(f.a)(),a(291)),E=a(287),v=a(293),b=a(286),y=a(288);var O=Object(i.b)((function(e){return{state:e}}))((function(e){var t=e.user,a=t.diary_cards.filter((function(e){return!!e.diary_card_trackers[0]>0})).map((function(e){return{x:new Date(e.entry_timestamp),y:e.diary_card_trackers[0].score}})),n=[];a.forEach((function(e){n.push(a.filter((function(t){return t.x===e.x})))}));for(var c={},o=0;o<a.length;o++){var l=a[o].x;c[l]||(c[l]=[]),c[l].push(a[o])}var i=Object.values(c).sort((function(e,t){return e[0].x>t[0].x?1:-1}));Date.prototype.datetimeString=function(){return"".concat(this.getHours()>12?this.getHours()-12:this.getHours(),":").concat(this.getMinutes()<10?0:"").concat(this.getMinutes()," ").concat(this.getHours()<12?"am":"pm")};var s=i.map((function(e){return r.a.createElement(g.a,{key:e[0].x,color:"#2c2c34",data:e,style:{data:{fill:"#2c2c34",fillOpacity:.6,stroke:"#2c2c34",strokeWidth:1},labels:{fontSize:15,fill:"#2c2c34",padding:15}}},r.a.createElement(E.a,{size:function(e){return e.active?14:10},labels:function(e){var t=e.datum;return"".concat(t.x.datetimeString())}}),r.a.createElement(v.a,null),r.a.createElement(v.a,{dependentAxis:!0,tickValues:[1,2,3,4,5]}))}));return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column1"},r.a.createElement("h2",null,t.first_name),r.a.createElement("p",null,t.email)),r.a.createElement("div",{className:"column2"},r.a.createElement(b.a,{className:"chart",domainPadding:{x:30,y:20},domain:{x:[i[0][0].x,new Date],y:[1,5]},scale:{x:"time"},style:{parent:{border:"1px solid #ccc",maxWidth:"80%"}},height:400,width:1e3,containerComponent:r.a.createElement(y.a,null)},s)))}));var k=Object(i.b)((function(e){return{state:e}}))((function(e){var t=e.state;return e.dispatch,r.a.createElement("div",{className:"dashboard"},r.a.createElement("h4",{className:"rightAlign"},"My Name: ",t.auth.name," "),r.a.createElement("h4",{className:"rightAlign",style:{paddingBottom:20}},"My Email: ",t.auth.email," "),t.users.map((function(e){return r.a.createElement(O,{key:e.id,user:e})})))}));var j=Object(i.b)((function(e){return{state:e}}))((function(e){return e.state,e.dispatch,r.a.createElement("div",null,r.a.createElement("h1",null,"My Account"))}));a(275);var N=Object(u.f)((function(e){var t=e.state,a=e.dispatch,c=e.history;return console.log("IN APP ROOT",t),Object(n.useEffect)((function(){if(localStorage.tokenId&&!t.auth.token){var e=localStorage.tokenId.slice(89);fetch("http://localhost:3000/therapists/".concat(e)).then((function(e){return e.json()})).then((function(e){a({type:"LOGIN_WITH_TOKEN",payload:e})}))}localStorage.tokenId||c.push("/login")}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Safe Keeping")),r.a.createElement(m,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/dashboard",component:k}),r.a.createElement(u.a,{path:"/login",render:function(e){return r.a.createElement(p,e)}}),r.a.createElement(u.a,{path:"/register",render:function(e){return r.a.createElement(h,e)}}),r.a.createElement(u.a,{path:"/logout",render:function(){localStorage.tokenId="",a({type:"LOGOUT"})}}),r.a.createElement(u.a,{path:"/account",render:function(){return r.a.createElement(j,null)}})))})),w=Object(i.b)((function(e){return{state:e}}))(N),S={token:"",id:0,name:"",email:""},x=[],I=Object(l.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{token:t.payload.token,id:t.payload.therapist.id,name:t.payload.therapist.name,email:t.payload.therapist.email};case"LOGIN_WITH_TOKEN":return{token:localStorage.tokenId.slice(0,88),id:t.payload.id,name:t.payload.name,email:t.payload.email};case"LOGOUT":return S;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.payload.therapist.users;case"LOGIN_WITH_TOKEN":return t.payload.users;case"LOGOUT":return x;default:return e}}}),_=Object(l.c)(I);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,null,r.a.createElement(i.a,{store:_},r.a.createElement(u.a,{path:"/",render:function(e){return r.a.createElement(w,e)}})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[161,1,2]]]);
//# sourceMappingURL=main.c9c92a91.chunk.js.map